@model IEnumerable<DoAnCoSo_Web.Models.ChuyenNganh>
@{
    ViewData["Title"] = "Danh sách chuyên ngành";
}


<style>
    table.dataTable thead th {
        background-color: #007BFF !important;
        color: white !important;
        text-transform: uppercase;
        font-weight: bold;
    }

    h2 {
        text-align: center;
        background-color: #007BFF;
        color: white !important;
        padding: 10px 15px;
        margin: 0 0 20px 0;
    }
</style>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/2.2.2/css/dataTables.bootstrap5.css">
<a asp-action="Index2" asp-controller="AdminHome" class="btn btn-secondary mb-3">Quay lại</a>
<h2>Danh sách chuyên ngành</h2>
<table id="example" class="table table-striped" style="width:100%">
    <thead>
        <tr>
            <th>Tên chuyên ngành</th>
            <th>Chức năng</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var chuyenNganh in Model)
        {
            <tr>
                <td>@chuyenNganh.TenChuyenNganh</td>
                <td>
                    <a asp-area="Admin" asp-controller="ChuyenNganh" asp-action="Edit" asp-route-id="@chuyenNganh.MaChuyenNganh" class="btn btn-outline-primary fw-bold rounded-pill shadow-sm">
                        <i class="fa-solid fa-pen-to-square"></i>Sửa
                    </a>
                    <button class="btn btn-danger fw-bold rounded-pill shadow-sm delete-btn" onclick="xoa(@chuyenNganh.MaChuyenNganh,this)">
                        <i class="fa-solid fa-trash"></i> Xóa
                    </button>
                </td>
            </tr>
        }
    </tbody>
</table>
<a asp-action="Create" class="btn btn-primary mb-3">+ Thêm chuyên ngành</a>
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/2.2.2/js/dataTables.js"></script>
<script src="https://cdn.datatables.net/2.2.2/js/dataTables.bootstrap5.js"></script>
<script>
    function xoa(id, element) {
        if (!confirm("Bạn có chắc chắn muốn xóa phòng học này không?")) {
            return;
        }

        $.ajax({
            url: `/Admin/ChuyenNganh/Delete`,
            type: "POST",
            data: { id: id },
            success: function (response) {
                if (response.success) {
                    // Ẩn dòng chứa khóa học (row trong table)
                    $(element).closest("tr").fadeOut(500, function () {
                        $(this).remove();
                    });
                } else {
                    alert("Không thể xóa khóa học này!");
                }
            },
            error: function () {
                alert("Lỗi khi xóa khóa học!");
            }
        });
    }
</script>
<script>
    new DataTable('#example',{
         columnDefs: [
        { targets: 0, searchable: true },
        { targets: [1], searchable: false }
      ],
        language: {
            search: "Tìm kiếm:",
            lengthMenu: "Hiển thị _MENU_ dòng",
            info: "Hiển thị _START_ đến _END_ của _TOTAL_ dòng",
            paginate: {
                previous: "Trước",
                next: "Sau"
            },
            zeroRecords: "Không tìm thấy kết quả phù hợp"
        }
    });
</script>