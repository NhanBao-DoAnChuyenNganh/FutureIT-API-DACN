@model IEnumerable<DoAnCoSo_Web.Models.PhieuDangKyKhoaHoc>
@{
    ViewData["Title"] = "Danh sách phiếu đăng ký khóa học";
    var coHocVienChoXuLy = Model.Any(p => p.TrangThaiDangKy == "Chờ xử lý");
    var maKhoaHoc = Model.FirstOrDefault()?.MaKhoaHoc ?? 0;
}
<title>@ViewData["Title"]</title>
<h2 class="mb-4">@ViewData["Title"]</h2>

@if (coHocVienChoXuLy)
{
    <a asp-action="XepLop" asp-route-maKhoaHoc="@maKhoaHoc" class="btn btn-success mb-3">
        Xếp lớp cho học viên
    </a>
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" />
<link rel="stylesheet" href="https://cdn.datatables.net/2.2.2/css/dataTables.bootstrap5.css" />

<style>
    #example td,
    #example th {
        text-align: left !important;
    }
</style>

<table id="example" class="table table-striped table-bordered" style="width:100%">
    <thead class="table-dark">
        <tr>
            <th>Tên học viên</th>
            <th>Số điện thoại</th>
            <th>Tên khóa học</th>
            <th>Học phí</th>
            <th>Trạng thái đăng ký</th>
            <th>Trạng thái thanh toán</th>
            <th>Ngày đăng ký</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.User?.HoTen</td>
                <td>@item.User?.SDT</td>
                <td>@item.KhoaHoc?.TenKhoaHoc</td>
                <td>@String.Format("{0:N0} VNĐ", item.KhoaHoc?.HocPhi)</td>
                <td>@item.TrangThaiDangKy</td>
                <td>@item.TrangThaiThanhToan</td>
                <td>@item.NgayDangKy.ToString("dd/MM/yyyy")</td>
            </tr>
        }
    </tbody>
</table>

<a class="btn btn-secondary mt-3" asp-action="Index">Quay lại</a>

<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/2.2.2/js/dataTables.js"></script>
<script src="https://cdn.datatables.net/2.2.2/js/dataTables.bootstrap5.js"></script>
<script>
    new DataTable('#example', {
        columnDefs: [
            { targets: 0, searchable: true },
            { targets: [1, 2, 3, 4, 5], searchable: false }
        ],
        language: {
            search: "Tìm kiếm:",
            lengthMenu: "Hiển thị _MENU_ dòng",
            info: "Hiển thị _START_ đến _END_ của _TOTAL_ dòng",
            paginate: {
                previous: "Trước",
                next: "Sau"
            },
            zeroRecords: "Không tìm thấy kết quả phù hợp"
        }
    });
</script>
