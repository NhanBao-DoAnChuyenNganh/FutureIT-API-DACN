@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model DoAnCoSo_Web.Areas.Student.ViewModels.KhoaHocViewModels
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
	body {
		font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
	}

	.tieu_de {
		padding: 100px 0px;
		background-color: darkblue;
		color: white;
		font-size: 70px;
		font-weight: bold;
	}

	.hover-effect {
		transition: all 0.3s ease-in-out;
		transform-origin: center;
	}

		.hover-effect:hover {
			transform: scale(1.1);
			z-index: 10;
			box-shadow: 0 10px 20px rgba(0,0,0,0.2);
			cursor: pointer;
		}

	.card {
		border: 0.5px solid #ddd;
	}

	.nav-link:hover {
		background-color: #d1e7dd;
		color: #0f5132 !important;
		border-radius: 0.375rem;
		transition: all 0.3s ease-in-out;
		cursor: pointer;
	}

	.da_yeu_thich {
		position: absolute;
		padding: 5px;
		margin: 10px;
		background-color: red;
		color: white;
		font-weight: bold;
		font-size: 10px;
		border-radius: 10px;
		margin-left: 190px;
		opacity: 80%;
	}
</style>
<body>
	@if (Model.listKhoaHoc.Count == 0)
	{
		<div class="row text-center mt-5 fs-5 font-italic">

			<div>KHÔNG TÌM THẤY KHÓA HỌC TƯƠNG ỨNG</div>

			<div><a class="btn btn-primary text-light mt-5" asp-action="KhoaHoc">Xem tất cả khóa học</a></div>
		</div>
	}
	else
	{
		<div class="container px-0">
			<div class="slider-area">
				<div class="slider-height2 d-flex align-items-center">
					<div class="container">
						<div class="row">
							<div class="col-xl-12">
								<div class="hero-cap hero-cap2 text-center">
									<h2>TẤT CẢ KHÓA HỌC</h2>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row mt-3">
				<div class="col-12 d-flex justify-content-end">
					<button class="btn btn-outline-secondary" id="Nut3Gach">
						<i class="fa-solid fa-bars"></i> BỘ LỌC KHÓA HỌC
					</button>
				</div>

				<div class="col-12 d-flex justify-content-center">
					<div class="d-none w-75" id="FormLoc">
						<div class="card card-body bg-light p-3 rounded shadow-sm">
							<form asp-action="LocTheoGia" asp-controller="StudentHome" method="get" class="alert alert-info">
								<h6 class=" fw-bold mb-3">Lọc theo giá tiền</h6>
								<div class="form-check mb-2">
									<input class="form-check-input" type="radio" name="LuaChon" value="1" id="1" required>
									<label class="form-check-label" for="gia1">Giá cao -> thấp</label>
								</div>
								<div class="form-check mb-2">
									<input class="form-check-input" type="radio" name="LuaChon" value="2" id="2">
									<label class="form-check-label" for="gia2">Giá thấp -> cao</label>
								</div>
								<div class="form-check mb-2">
									<input class="form-check-input" type="radio" name="LuaChon" value="3" id="3">
									<label class="form-check-label" for="gia3">Dưới 5.000.000 VND</label>
								</div>
								<div class="form-check mb-2">
									<input class="form-check-input" type="radio" name="LuaChon" value="4" id="4">
									<label class="form-check-label" for="gia4">Từ 5.000.000 -> 7.000.000 VND</label>
								</div>
								<div class="form-check mb-2">
									<input class="form-check-input" type="radio" name="LuaChon" value="5" id="5">
									<label class="form-check-label" for="4">Từ 7.000.000 VND trở lên</label>
								</div>
								<div class="row">
									<div class="col-6">
										<a class="btn btn-outline-primary mt-3 rounded-pill fw-bold w-100" asp-action="LocTheoGia" asp-route-LuaChon="0">
											Hủy bộ lọc
										</a>
									</div>
									<div class="col-6">
										<button type="submit" class="btn btn-info mt-3 rounded-pill fw-bold w-100">Lọc</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>

			<div class="row mt-3">
				<div class="col-2">
					<!--loc theo loai ngon ngu-->
					<div class="mt-2 mb-3 fs-5 fw-bold">Các loại khóa học</div>
					<ul class="nav flex-column bg-light p-3 rounded shadow-sm">
						<li class="nav-item border-bottom mb-1">
							<a class="nav-link text-secondary fs-6" asp-action="LocTheoLoai" asp-route-TenLoai="bé">Khóa học cho bé</a>
						</li>
						<li class="nav-item border-bottom mb-1">
							<a class="nav-link text-secondary fs-6" asp-action="LocTheoLoai" asp-route-TenLoai="c++">C++</a>
						</li>
						<li class="nav-item border-bottom mb-1">
							<a class="nav-link text-secondary fs-6" asp-action="LocTheoLoai" asp-route-TenLoai="java">Java</a>
						</li>
						<li class="nav-item border-bottom mb-1">
							<a class="nav-link text-secondary fs-6" asp-action="LocTheoLoai" asp-route-TenLoai="html">Website Front-end</a>
						</li>
						<li class="nav-item border-bottom mb-1">
							<a class="nav-link text-secondary fs-6" asp-action="LocTheoLoai" asp-route-TenLoai="python">Python</a>
						</li>
						<li class="nav-item border-bottom mb-1">
							<a class="nav-link text-secondary fs-6" asp-action="LocTheoLoai" asp-route-TenLoai="">Hủy lọc</a>
						</li>
						<li class="nav-item mt-2">
							<a class="nav-link text-danger fw-bold" asp-action="DanhSachQuanTam" asp-controller="StudentHome">
								<i class="fa-regular fa-heart"></i> Yêu thích
							</a>
						</li>
					</ul>
				</div>

				<div class="col-10">
					<div class="row">
						@foreach (var kh in Model.listKhoaHoc)
						{
							<div class="col-4 p-2">
								<a asp-action="XemChiTiet" asp-route-id="@kh.KhoaHoc.MaKhoaHoc" style="text-decoration: none; color: inherit;">
									<div class="card hover-effect" style="width: 100%; height: 440px; position: relative;">
										@if (kh.DaYeuThich)
										{
											<div class="da_yeu_thich">
												<i class="fa-solid fa-heart me-2"></i> Đã yêu thích
											</div>
										}

										<div class="text-center">
											<img class="card-img-top rounded-2" src="data:image/jpg;base64,@Convert.ToBase64String(kh.KhoaHoc.HinhAnhKhoaHoc.FirstOrDefault(h => h.LaAnhDaiDien && h.KhoaHocMaKhoaHoc == kh.KhoaHoc.MaKhoaHoc).NoiDungHinh)"
												 style="width: 100%; height: 200px;">

										</div>

										<div class="card-body">
											<h5 class="card-title text-primary">@kh.KhoaHoc.TenKhoaHoc - @kh.KhoaHoc.NgayHoc</h5>

											<div class="d-flex justify-content-between align-items-center mt-2">
												<div class="text-warning">
													@for (int i = 1; i <= 5; i++)
													{
														if (kh.SoSaoTrungBinh >= i)
														{
															<i class="fa-solid fa-star text-warning"></i>
														}
														else if (kh.SoSaoTrungBinh >= i - 0.5)
														{
															<i class="fa-solid fa-star-half-stroke text-warning"></i>
														}
														else
														{
															<i class="fa-regular fa-star text-warning"></i>
														}
													}
												</div>
												<div class="text-muted fs-6">@kh.TongLuotBinhLuan đánh giá</div>
											</div>

											<div class="d-flex justify-content-between text-muted mt-3">
												<span><i class="fa-regular fa-heart me-1 text-danger"></i>@kh.TongLuotQuanTam</span>
												<span class="text-danger fw-bold fs-4">@kh.KhoaHoc.HocPhi.ToString("N0") VND</span>
											</div>

											<div class="text-center mt-3">
												<a asp-action="XemChiTiet" asp-route-id="@kh.KhoaHoc.MaKhoaHoc" class="btn btn-outline-primary btn-sm fw-bold">Xem chi tiết >></a>
											</div>
										</div>
									</div>
								</a>
							</div>
						}
					</div>
				</div>
			</div>
		</div>
	}
</body>

<script>
	document.addEventListener("DOMContentLoaded", function () {
		const nut3Gach = document.getElementById("Nut3Gach");
		const formLoc = document.getElementById("FormLoc");

		nut3Gach.addEventListener("click", function () {
			formLoc.classList.toggle("d-none");
		});

		const luaChon = '@ViewBag.LuaChon';
		if(luaChon){
			document.querySelector(`input[name="LuaChon"][value="${luaChon}"]`).checked = true;
		}
	});
</script>



